<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TaskFlow — Todolist</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="pagination.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
  </head>

  <body>
    <!-- MODAL FORM ADDTASKS -->
    <div id="add-task-modal" class="modal hidden">
      <div class="modal-overlay" id="add-overlay"></div>

      <div
        class="modal-content"
        role="dialog"
        aria-modal="true"
        aria-label="Add new task"
      >
        <div class="modal-head">
          <h3>Add new task</h3>
          <button
            type="button"
            class="icon-btn"
            id="btn-close-add"
            aria-label="Close"
          >
            ✕
          </button>
        </div>

        <form id="add-task-form" class="form-grid">
          <div class="field">
            <label>Task title</label>
            <input type="text" name="task" placeholder="Task title" required minlength="3" maxlength="100" />
            <span class="error-msg" id="task-error"></span>
          </div>

          <div class="field">
            <label>Description</label>
            <textarea name="description" placeholder="Description" maxlength="500"></textarea>
            <span class="error-msg" id="description-error"></span>
          </div>

          <div class="field">
            <label>Category</label>
            <div class="custom-select" id="category-select">
              <div class="select-trigger">
                <span class="select-text">Work</span>
                <div class="select-arrow">▼</div>
              </div>
              <div class="select-options">
                <div class="select-option" data-value="work">Work</div>
                <div class="select-option" data-value="personal">Personal</div>
                <div class="select-option" data-value="shopping">Shopping</div>
                <div class="select-option" data-value="health">Health</div>
                <div class="select-option" data-value="education">Education</div>
                <div class="select-option" data-value="other">Other</div>
              </div>
            </div>
            <input type="hidden" name="category" value="work" />
          </div>

          <div class="row-2">
            <div class="field">
              <label>Priority</label>
              <div class="custom-select" id="priority-select">
                <div class="select-trigger">
                  <span class="select-text">Medium</span>
                  <div class="select-arrow">▼</div>
                </div>
                <div class="select-options">
                  <div class="select-option" data-value="high">High</div>
                  <div class="select-option selected" data-value="medium">Medium</div>
                  <div class="select-option" data-value="low">Low</div>
                </div>
              </div>
              <input type="hidden" name="priority" value="medium" />
            </div>

            <div class="field">
              <label>Status</label>
              <div class="custom-select" id="status-select">
                <div class="select-trigger">
                  <span class="select-text">Todo</span>
                  <div class="select-arrow">▼</div>
                </div>
                <div class="select-options">
                  <div class="select-option selected" data-value="todo">Todo</div>
                  <div class="select-option" data-value="doing">Doing</div>
                  <div class="select-option" data-value="done">Done</div>
                </div>
              </div>
              <input type="hidden" name="status" value="todo" />
            </div>
          </div>

          <div class="field">
            <label for="deadline-at">Deadline</label>
            <input type="datetime-local" id="deadline-at" name="deadlineAt" onclick="this.showPicker()" />
            <span class="error-msg" id="deadline-error"></span>
          </div>

          <div class="modal-actions">
            <button type="button" id="btn-cancel" class="btn btn-ghost">
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">Add</button>
          </div>
        </form>
      </div>
    </div>
    <!-- Background glow -->
    <div class="bg-glow" aria-hidden="true">
      <span class="glow glow-indigo"></span>
      <span class="glow glow-emerald"></span>
      <span class="glow glow-fuchsia"></span>
    </div>

    <div class="container">
      <!-- Top bar -->
      <header class="topbar">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path
                d="M7 7h10v10H7V7Z"
                stroke="currentColor"
                stroke-width="2"
                opacity=".6"
              />
              <path d="M7 7l10 10" stroke="currentColor" stroke-width="2" />
              <path d="M17 7L7 17" stroke="currentColor" stroke-width="2" />
            </svg>
          </div>

          <div class="brand-text">
            <h1 class="brand-title">TaskFlow</h1>
            <p class="brand-subtitle">Todolist Modern Style</p>
          </div>
        </div>

        <div class="topbar-actions">
          <span id="user-label" class="badge">User: </span>
          <button
            onclick="logoutAcc()"
            id="btn-logout"
            class="btn btn-ghost"
            type="button"
          >
            Log out
          </button>
          <button id="btn-settings" class="btn btn-ghost" type="button">
            Settings
          </button>
        </div>
      </header>

      <!-- Layout -->
      <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
          <section class="card card-glass">
            <div class="card-header card-header-divider">
              <div class="row row-between row-center">
                <h2 class="section-title">OVERVIEW</h2>
                <span id="badge-date" class="badge">Today</span>
              </div>

              <!-- Stats -->
              <div class="stats">
                <div class="stat">
                  <p class="stat-label">Total</p>
                  <p id="stat-total" class="stat-value">0</p>
                </div>
                <div class="stat">
                  <p class="stat-label">Active</p>
                  <p id="stat-active" class="stat-value">0</p>
                </div>
                <div class="stat">
                  <p class="stat-label">Done</p>
                  <p id="stat-done" class="stat-value">0</p>
                </div>
              </div>

              <!-- Progress -->
              <div class="progress">
                <div class="row row-between">
                  <span class="muted small">Daily progress</span>
                  <span id="progress-text" class="muted small">0%</span>
                </div>

                <div class="progress-track">
                  <div id="progress-bar" class="progress-bar"></div>
                </div>
              </div>
            </div>
          </section>
        </aside>

        <!-- Main -->
        <main class="main">
          <section class="card card-glass">
            <!-- Controls -->
            <div class="card-header card-header-divider">
              <div class="controls">
                <!-- Tabs -->
                <div class="tabs" role="tablist" aria-label="Task filter">
                  <button
                    data-filter="all"
                    class="tab tab-active"
                    id="tab-all"
                    type="button"
                  >
                    All
                  </button>
                  <button
                    data-filter="todo"
                    class="tab"
                    id="tab-todo"
                    type="button"
                  >
                    Todo
                  </button>
                  <button
                    data-filter="doing"
                    class="tab"
                    id="tab-doing"
                    type="button"
                  >
                    Doing
                  </button>
                  <button
                    data-filter="done"
                    class="tab"
                    id="tab-done"
                    type="button"
                  >
                    Done
                  </button>
                </div>
                <div class="legend">
                  <span class="pill"> <i class="dot dot-high"></i> High </span>
                  <span class="pill">
                    <i class="dot dot-medium"></i> Medium
                  </span>
                  <span class="pill"> <i class="dot dot-low"></i> Low </span>
                </div>

                <!-- Search -->
                <div class="search">
                  <span class="search-icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                      <path
                        d="M21 21l-4.3-4.3"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                      />
                      <circle
                        cx="11"
                        cy="11"
                        r="7"
                        stroke="currentColor"
                        stroke-width="2"
                      />
                    </svg>
                  </span>

                  <input
                    id="search-input"
                    class="input input-with-icon"
                    type="text"
                    placeholder="Search tasks..."
                  />
                </div>
              </div>

              <!-- Add task & filter category -->
              <div class="add-and-filter-time">
                <button id="btn-open-add" class="btn btn-primary">
                  + Add Task
                </button>
                <div class="filter-row">
                  <div class="custom-select" id="category-filter">
                    <div class="select-trigger">
                      <span class="select-text">All Categories</span>
                      <div class="select-arrow">▼</div>
                    </div>
                    <div class="select-options">
                      <div class="select-option selected" data-value="all">All Categories</div>
                      <div class="select-option" data-value="work">Work</div>
                      <div class="select-option" data-value="personal">Personal</div>
                      <div class="select-option" data-value="shopping">Shopping</div>
                      <div class="select-option" data-value="health">Health</div>
                      <div class="select-option" data-value="education">Education</div>
                      <div class="select-option" data-value="other">Other</div>
                    </div>
                  </div>
                  <div class="custom-select" id="time-filter">
                    <div class="select-trigger">
                      <span class="select-text">All time</span>
                      <div class="select-arrow">▼</div>
                    </div>
                    <div class="select-options">
                      <div class="select-option selected" data-value="all">All time</div>
                      <div class="select-option" data-value="overdue">Overdue</div>
                      <div class="select-option" data-value="today">Due today</div>
                      <div class="select-option" data-value="next7d">Next 7 days</div>
                      <div class="select-option" data-value="next30d">Next 30 days</div>
                      <div class="select-option" data-value="nodeadline">No deadline</div>
                    </div>
                  </div>
                </div>

                  <div id="range-box" class="range hidden">
                    <input id="range-from" type="date" class="input" />
                    <span class="muted small">→</span>
                    <input id="range-to" type="date" class="input" />
                    <button
                      id="range-apply"
                      class="btn btn-ghost"
                      type="button"
                    >
                      Apply
                    </button>
                    <button
                      id="range-clear"
                      class="btn btn-ghost"
                      type="button"
                    >
                      Clear
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- List -->
            <div class="card-body">
              <!-- Empty state -->
              <div id="empty-state" class="empty hidden">
                <div class="empty-icon" aria-hidden="true">
                  <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                    <path
                      d="M7 7h10v10H7V7Z"
                      stroke="currentColor"
                      stroke-width="2"
                      opacity=".7"
                    />
                    <path
                      d="M9 12h6"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
                <h3 class="empty-title">No tasks yet</h3>
                <p class="empty-desc">Add your first task to get started.</p>
              </div>

              <ul id="task-list" class="task-list"></ul>

              <!-- Pagination -->
              <div id="pagination" class="pagination hidden">
                <button id="prev-btn" class="btn btn-ghost" disabled>← Previous</button>
                <div id="page-numbers" class="page-numbers"></div>
                <button id="next-btn" class="btn btn-ghost">Next →</button>
              </div>

              <!-- Footer -->
              <div class="footer">
                <span id="remaining" class="muted">0 items left</span>
                <button
                  onclick="clearCompletedTask()"
                  id="btn-clear-2"
                  class="btn btn-ghost"
                  type="button"
                >
                  Clear completed
                </button>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
